!function(e=".",t="__import__"){try{self[t]=new Function("u","return import(u)")}catch(n){const a=new URL(e,location),s=e=>{URL.revokeObjectURL(e.src),e.remove()};self[t]=e=>new Promise(((n,c)=>{const i=new URL(e,a);if(self[t].moduleMap[i])return n(self[t].moduleMap[i]);const r=new Blob([`import * as m from '${i}';`,`${t}.moduleMap['${i}']=m;`],{type:"text/javascript"}),o=Object.assign(document.createElement("script"),{type:"module",src:URL.createObjectURL(r),onerror(){c(new Error(`Failed to import: ${e}`)),s(o)},onload(){n(self[t].moduleMap[i]),s(o)}});document.head.appendChild(o)})),self[t].moduleMap={}}}("assets/");const e=e=>e.toLocaleLowerCase().replace(/[äàâ]/u,"a").replace(/[ç]/u,"c").replace(/[éèêë]/u,"e").replace(/[îï]/u,"i").replace(/[öô]/u,"o").replace(/[üùû]/u,"u").replace(/[ÿ]/u,"y"),t=t=>t.split(/[^\p{L}\p{N}]/u).map((t=>e(t.trim())));const n=new class{constructor(e="https://znerol.github.io/chzip-js/data",t={}){this.baseurl=e,this.cache={id:"",data:[]},this.warn=t.warn||console.warn.bind(console),this.fetch=t.fetch||window.fetch.bind(window)}async lookup(n,a){if(0==a.length)return this.warn("chzip pfx must be at least one character."),[];const s=`${n}-${e(a[0])}`;if(this.cache.id!==s){const e=`${this.baseurl}/${s}.json`,t=await this.fetch(e);if(!t.ok)return this.warn("chzip request was not successful."),[];const n=await t.json();if(!Array.isArray(n))return this.warn("chzip response was not an array."),[];this.cache.data=n,this.cache.id=s}const c=this.cache.data.filter((e=>{return s=e[n].toString(),t(a).every((e=>t(s).some((t=>t.startsWith(e)))));var s}));return c.sort(((e,t)=>e.cty.localeCompare(t.cty)||e.zip-t.zip)),c}};addEventListener("DOMContentLoaded",(()=>{const e=document.getElementById("zip"),t=document.getElementById("city"),a=document.getElementById("canton"),s=document.getElementById("hits"),c=document.getElementById("reset"),i=()=>{s.innerHTML="",s.classList.remove("hits-visible")},r=n=>{s.innerHTML="",s.append(...n.map((n=>{const s=document.createElement("li");return s.innerText=`${n.zip} ${n.cty} | ${n.reg}`,s.addEventListener("click",(()=>(n=>{e.value=n.zip,t.value=n.cty,a.value=n.reg,i()})(n))),s}))),n.length>0?s.classList.add("hits-visible"):s.classList.remove("hits-visible")};e.addEventListener("input",(async()=>{const t=await n.lookup("zip",e.value);r(t)})),t.addEventListener("input",(async()=>{const e=await n.lookup("cty",t.value);r(e)})),c.addEventListener("click",(()=>{e.value="",t.value="",a.value="",i()}))}));
