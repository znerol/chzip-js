!function(e=".",t="__import__"){try{self[t]=new Function("u","return import(u)")}catch(n){const a=new URL(e,location),c=e=>{URL.revokeObjectURL(e.src),e.remove()};self[t]=e=>new Promise(((n,r)=>{const o=new URL(e,a);if(self[t].moduleMap[o])return n(self[t].moduleMap[o]);const s=new Blob([`import * as m from '${o}';`,`${t}.moduleMap['${o}']=m;`],{type:"text/javascript"}),i=Object.assign(document.createElement("script"),{type:"module",src:URL.createObjectURL(s),onerror(){r(new Error(`Failed to import: ${e}`)),c(i)},onload(){n(self[t].moduleMap[o]),c(i)}});document.head.appendChild(i)})),self[t].moduleMap={}}}("assets/");const e=e=>e.toLocaleLowerCase().replace(/[äàâ]/u,"a").replace(/[ç]/u,"c").replace(/[éèêë]/u,"e").replace(/[îï]/u,"i").replace(/[öô]/u,"o").replace(/[üùû]/u,"u").replace(/[ÿ]/u,"y"),t=t=>t.split(/[^\p{L}\p{N}]/u).map((t=>e(t.trim())));const n=new class{constructor(e="https://znerol.github.io/chzip-js/data",t={}){this.baseurl=e,this.cache={id:"",data:[]},this.warn=t.warn||console.warn.bind(console),this.fetch=t.fetch||window.fetch.bind(window)}async lookup(n,a){if(0==a.length)return this.warn("chzip pfx must be at least one character."),[];const c=`${n}-${e(a[0])}`;if(this.cache.id!==c){const e=`${this.baseurl}/${c}.json`,t=await this.fetch(e);if(!t.ok)return this.warn("chzip request was not successful."),[];const n=await t.json();if(!Array.isArray(n))return this.warn("chzip response was not an array."),[];this.cache.data=n,this.cache.id=c}const r=this.cache.data.filter((e=>{return c=e[n].toString(),t(a).every((e=>t(c).some((t=>t.startsWith(e)))));var c}));return r.sort(((e,t)=>e.cty.localeCompare(t.cty)||e.zip-t.zip)),r}}("data");addEventListener("DOMContentLoaded",(()=>{const e=document.getElementById("zip"),t=document.getElementById("city"),a=document.getElementById("canton"),c=document.getElementById("hits"),r=n=>{c.innerHTML="",c.append(...n.map((n=>{const r=document.createElement("li");return r.innerText=`${n.zip} ${n.cty} | ${n.reg}`,r.addEventListener("click",(()=>(n=>{c.innerHTML="",e.value=n.zip,t.value=n.cty,a.value=n.reg})(n))),r})))};e.addEventListener("input",(async()=>{const t=await n.lookup("zip",e.value);r(t)})),t.addEventListener("input",(async()=>{const e=await n.lookup("cty",t.value);r(e)}))}));
